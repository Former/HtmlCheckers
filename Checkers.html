<!-- Copyright 2025 by Alexei Bezborodov <AlexeiBv+html_checkers@narod.ru> -->
<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>Шашки</title>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.12/brython.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.12/brython_stdlib.js"></script>
</head>
<body>

<button id="button__start_test">Запустить тестирование</button>
    
<p id="out-text"></p>

<script type="text/python">

from browser import document, html, window
import enum

class UserType(enum.Enum):
    utHuman = enum.auto()
    utAI = enum.auto()

class User:
    def __init__(self, a_uType, a_uName):
        self.uType = a_uType
        self.uName = a_uName

class Point:
    def __init__(self, a_X, a_Y):
        self.x = a_X
        self.y = a_Y

    def __add__(self, a_Point2):
        return Point(self.x + a_Point2.x, self.y + a_Point2.y)

    def __eq__(self, a_Point2):
        return self.x == a_Point2.x and self.y == a_Point2.y

class BoardItemType(enum.Enum):
    biNone = enum.auto()
    biChecker = enum.auto()
    biDamka = enum.auto()

class BoardItem:
    def __init__(self, a_Type, a_UserID):
        self.iType = a_Type
        self.userID = a_UserID

    def __eq__(self, a_BoardItem):
        return self.iType == a_BoardItem.iType and self.userID == a_BoardItem.userID

class Board:
    def __init__(self, a_Width, a_Height):
        self.bWidth = a_Width
        self.bHeight = a_Height
        self.bData = CreateArray2D(BoardItem(BoardItemType.biNone, 0), self.bWidth, self.bHeight)

    def GetWidth(self):
        return self.bWidth

    def GetHeight(self):
        return self.bHeight

    def GetItem(self, a_Point):
        return self.bData[a_Point.y][a_Point.x]

    def SetItem(self, a_Point, a_Item):
        self.bData[a_Point.y][a_Point.x] = a_Item

class GameRuleType(enum.Enum):
    grNextStep = enum.auto()
    grFinish = enum.auto()

class GameRule:
    def __init__(self, a_Type, a_Function):
        self.rType = a_Type
        self.rFunction = a_Function

class Game:
    def __init__(self, a_UserList, a_Board, a_RulesList):
        self.gUserList = a_UserList
        self.gBoard = a_Board
        self.gRulesList = a_RulesList

def BaseClassesTest():
    u = User(UserType.utHuman, "Alexei")
    assert u.uName == "Alexei"
    assert u.uType == UserType.utHuman
    assert Point(1, 2) + Point(3, 4) == Point(4, 6)

    b = Board(3, 3)
    c1 = BoardItem(BoardItemType.biChecker, 0)
    c2 = BoardItem(BoardItemType.biChecker, 1)
    b.SetItem(Point(0, 0), c1)
    b.SetItem(Point(1, 0), c2)
    assert b.GetItem(Point(0, 0)) == c1
    assert b.GetItem(Point(1, 0)) == c2
    assert b.GetItem(Point(1, 1)) == BoardItem(BoardItemType.biNone, 0)

def myprint(s):
    document["out-text"].innerHTML = document["out-text"].innerHTML + "<br />" + str(s)

def GetVerticalWords(size):
    return list(range(1, size + 1))

def GetHorisontalWords(size):
    return [chr(ord('A') + i) for i in range(size)]

def FromStringToXY(string_cmd):
    if not isinstance(string_cmd, str) or len(string_cmd) < 2:
        return None

    horizontal_part = string_cmd[0].upper()
    vertical_part = string_cmd[1:]

    try:
        x = ord(horizontal_part) - ord('A')
        y = int(vertical_part) - 1
        return x, y
    except:
        return None

def FromXYToString(x, y):
    if not isinstance(x, int) or not isinstance(y, int):
        return None
    if x < 0 or y < 0:
        return None
    horizontal_part = chr(ord('A') + x)
    vertical_part = str(y + 1)
    return horizontal_part + vertical_part

def TestConvertCoordinates():
    assert FromStringToXY("A1") == (0, 0)
    assert FromStringToXY("B2") == (1, 1)
    assert FromStringToXY("C3") == (2, 2)
    assert FromStringToXY("Z26") == (25, 25)
    assert FromStringToXY("a1") == (0, 0)
    assert FromStringToXY("A12") == (0, 11)
    assert FromStringToXY("A") == None
    assert FromStringToXY("1") == None
    assert FromStringToXY("1A") == None
    assert FromStringToXY(1) == None
    assert FromXYToString(0, 0) == "A1"
    assert FromXYToString(1, 1) == "B2"
    assert FromXYToString(2, 2) == "C3"
    assert FromXYToString(25, 25) == "Z26"
    assert FromXYToString(0, 11) == "A12"
    assert FromXYToString(-1, 1) == None
    assert FromXYToString(1, -1) == None
    assert FromXYToString(1.1, 1) == None
    assert FromXYToString(1, 1.1) == None


def CreateArray2D(defaultValue, width, height):
    array2d = []
    for _ in range(height):
        row = [defaultValue] * width
        array2d.append(row)
    return array2d

def TestCreateArray2D():
    assert CreateArray2D(0, 0, 0) == []
    assert CreateArray2D(0, 0, 3) == [[],[],[]]
    assert CreateArray2D(0, 3, 0) == []
    assert CreateArray2D(1, 1, 2) == [[1], [1]]
    assert CreateArray2D(2, 2, 2) == [[2, 2], [2, 2]]
    assert CreateArray2D(1, 2, 1) == [[1, 1]]
    assert CreateArray2D("a", 1, 1) == [["a"]]
    assert CreateArray2D(2, 3, 3) == [[2, 2, 2], [2, 2, 2], [2, 2, 2]]
    assert CreateArray2D("x", 4, 2) == [["x", "x", "x", "x"], ["x", "x", "x", "x"]]
    assert CreateArray2D(True, 2, 3) == [[True, True], [True, True], [True, True]]
    assert CreateArray2D(0, 2, 2) == [[0, 0], [0, 0]]
    assert CreateArray2D(3.14, 2, 2) == [[3.14, 3.14], [3.14, 3.14]]
    assert CreateArray2D(None, 2, 2) == [[None, None], [None, None]]
    assert CreateArray2D(5, 1, 5) == [[5], [5], [5], [5], [5]]
    assert CreateArray2D(10, 5, 1) == [[10, 10, 10, 10, 10]]

    a = CreateArray2D(0, 2, 2)
    assert a == [[0, 0], [0, 0]]
    a[0][0] = 1
    assert a == [[1, 0], [0, 0]]

    b = CreateArray2D("test", 3, 2)
    b[0][1] = "modified"
    assert b == [["test", "modified", "test"], ["test", "test", "test"]]

def Test(event):
    TestConvertCoordinates()
    TestCreateArray2D()
    BaseClassesTest()
    myprint('Все тесты прошли без ошибок')


document["button__start_test"].bind("click", Test)
</script>

</body>

</html>
